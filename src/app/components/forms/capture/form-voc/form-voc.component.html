<ng-keyboard-shortcuts [shortcuts]="shortcuts"></ng-keyboard-shortcuts>
<br><br>
<div class="capture-header">
  <h1 class="capture-form-title text-dark">
    <span>VOC</span>
  </h1>
</div>
<form (submit)="submit(); $event.preventDefault()" *ngIf="this.form !== undefined" style="padding: 24px;border-radius: 10px; background: #f2f2f2;">
  <div class="form-group" *ngIf="this.form.lineNo != undefined">
    <input type="text" [focus]="this.focusSADLine"
      [(ngModel)]="this.form.lineNo" [ngModelOptions]="{standalone: true}"
      class="form-control form-control-sm shadow-sm form-control-light"
      (mouseover)="updateHelpContext('form-voc-lineno')"
      placeholder="Line No"
      [ngClass]="{'form-control-invalid': this.form.lineNo.error !== null && this.form.lineNo.error !== undefined}"/>
      <p class="invalid-control-label" *ngIf="this.form.lineNo.error !== null && this.form.lineNo.error !== undefined" style="width: 100%;">{{this.form.lineNo.error}}</p>
  </div>
  <div class="form-group" *ngIf="this.form.tariff != undefined">
        <input [(ngModel)]="this.form.tariff" type="text" [ngClass]="{'form-control-invalid': this.form.tariff.error !== null && this.form.tariff.error !== undefined}" class="form-control form-control-sm shadow-sm form-control-light" (keyup)="filterTariff()" placeholder="Tariff" aria-label="Tariff" [formControl]="myControl" [matAutocomplete]="tariffAuto">
        <mat-autocomplete #tariffAuto="matAutocomplete" >
          <mat-option *ngFor="let tariff of tariffs" [value]="tariff.name" (onSelectionChange)="selectedTariff(tariff.id)">
            {{tariff.name}}
          </mat-option>
        </mat-autocomplete>
        <p class="invalid-control-label" *ngIf="this.form.tariff.error !== null && this.form.tariff.error !== undefined">{{this.form.tariff.error}}</p>
    </div>
    <div class="form-group" *ngIf="this.form.unitOfMeasure != undefined">
      <input [(ngModel)]="this.form.unitOfMeasure" (keyup)="filterUnit()" [ngClass]="{'form-control-invalid': this.form.unitOfMeasure.error !== null && this.form.unitOfMeasure.error !== undefined}" type="text" placeholder="Unit Of Measure" aria-label="Unit of Measure" class="form-control form-control-sm shadow-sm form-control-light"  [formControl]="unitOfMeasure" [matAutocomplete]="unitOfMeasureAuto">
      <mat-autocomplete #unitOfMeasureAuto="matAutocomplete">
        <mat-option *ngFor="let unit of unitOfMeasureList" [value]="unit.name" (onSelectionChange)="selectedUnit(unit.name, unit.unitOfMeasureID)">
          {{unit.name}}, {{unit.description}}
        </mat-option>
      </mat-autocomplete>
      <p class="invalid-control-label" *ngIf="this.form.unitOfMeasure.error !== null && this.form.unitOfMeasure.error !== undefined">{{this.form.unitOfMeasure.error}}</p>
        </div>
        <div class="form-group">
            <label for="customsValue">Customs Value</label>
          <input type="number"
          id="customsValue"
            [(ngModel)]="this.form.customsValue" [ngModelOptions]="{standalone: true}"
            class="form-control form-control-sm shadow-sm form-control-light"
            placeholder="Customs Value" />
            <!-- <p class="invalid-control-label" *ngIf="this.form.customsValue.error !== null">{{this.form.customsValue.error}}</p> -->
          </div>
          <div class="form-group">
              <label for="quantity">Quantity</label>
            <input type="number" id="quantity"
            [(ngModel)]="this.form.quantity" [ngModelOptions]="{standalone: true}"
              class="form-control form-control-sm shadow-sm form-control-light"
              placeholder="Quantity" />
              <!-- <p class="invalid-control-label" *ngIf="this.form.customsValue.error !== null">{{this.form.customsValue.error}}</p> -->
            </div>
        <div class="form-group" style="margin-bottom: 0">
          <div class="row" style="margin-bottom: 0">
            <div class="col-6" style="margin-bottom: 0">
              <p><strong class="text-muted text-mini-heading">Duty Tax Types</strong></p>
              <ul class="tile-list list-unstyled shadow-sm" *ngIf="this.dutyList !== undefined">
                <li>
                  <div class="form-group">
                    <input type="search" [(ngModel)]="this.dutiesQuery" [ngModelOptions]="{standalone: true}" (keyup)="filterDuties()" class="form-control form-control-sm" placeholder="Search">
                  </div>
                </li>
                <li class="duty-item" *ngFor="let item of dutyList.duties; let i = index" (click)="assignDuty(item)" (keypress)="assignDuty(item)" [tabindex]="i">
                  <small class="float-right" style="margin-top: 4px">{{item.duty}}</small>
                  <small>{{item.code}}</small>
                </li>
              </ul>
            </div>
            <div class="col-6" *ngIf="this.isUpdate" style="margin-bottom: 0">
              <p><strong class="text-muted text-mini-heading">Assigned Duty Tax Types</strong></p>
              <ul class="tile-list list-unstyled shadow-sm" *ngIf="this.assignedDuties === undefined">
                <li><small class="test-muted">No Duty Types Assigned</small></li>
              </ul>
              <ul class="tile-list list-unstyled shadow-sm" *ngIf="this.assignedDuties !== undefined">
                  <li>
                    <div class="form-group">
                      <input tabindex="-1" [focus]="focusDutiesQuery" type="search" [(ngModel)]="this.dutieAssignedQuery" [ngModelOptions]="{standalone: true}" (keyup)="filterAssignedDuties()" class="form-control form-control-sm" placeholder="Search">
                    </div>
                  </li>
                  <li *ngFor="let item of assignedDuties; let i = index" class="duty-item" (click)="revokeDuty(item)" [tabindex]="i">
                      <small class="float-right" style="margin-top: 4px">{{item.duty}}</small>
                      <small>{{item.code}}</small>
                  </li>
              </ul>
            </div>
            <div class="col-6" *ngIf="!this.isUpdate">
                <p><strong class="text-muted text-mini-heading">Assigned Duty Tax Types</strong></p>
                <ul class="tile-list list-unstyled shadow-sm" *ngIf="this.dutiesToBeSaved.length === 0">
                  <li><small class="test-muted">No Duty Types Assigned</small></li>
                </ul>
                <ul class="tile-list list-unstyled shadow-sm" *ngIf="this.dutiesToBeSaved.length > 0">
                    <li>
                      <div class="form-group">
                        <input [focus]="focusAssignedQuery" type="search" [(ngModel)]="this.dutieAssignedQuery" [ngModelOptions]="{standalone: true}" (keyup)="filterAssignedDuties()" class="form-control form-control-sm" placeholder="Search">
                      </div>
                    </li>
                    <li *ngFor="let item of dutiesToBeSaved; let i = index" class="duty-item" (click)="revokeDuty(item)" (keypress)="revokeDuty(item)" [tabindex]="i">
                        <small class="float-right" style="margin-top: 4px">{{item.duty}}</small>
                        <small>{{item.code}}</small>
                    </li>
                </ul>
              </div>
          </div>
        </div>
  <!-- <div class="form-group text-right" style="margin: 0;">
    <button *ngIf="!this.isUpdate" type="submit" class="btn btn-primary btn-sm">Add</button>
    <button *ngIf="this.isUpdate" type="submit" class="btn btn-primary btn-sm">Update</button>
  </div> -->
</form>

<app-notification></app-notification>
