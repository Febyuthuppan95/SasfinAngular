<ng-keyboard-shortcuts [shortcuts]="shortcuts"></ng-keyboard-shortcuts>

<form (submit)="submit(); $event.preventDefault()" *ngIf="this.form !== undefined" style="padding: 24px;border-radius: 10px; background: #f2f2f2;">
  <div class="form-group" *ngIf="this.form.commonFactor != undefined">
    <label for="custVal">Common Factor</label>
      <input type="text"  id="commonFactor"
        [(ngModel)]="this.form.commonFactor.value" [ngModelOptions]="{standalone: true}"
        class="form-control form-control-sm shadow-sm form-control-light"
        (mouseover)="updateHelpContext('form-customs-worksheet-line-commonfactor')"
        placeholder="Common Factor" />
        <!-- [ngClass]="{'form-control-invalid': this.form.commonFactorError !== null && this.form.commonFactorError !== undefined}"-->
        <div *ngIf="this.form.commonFactor.error !== null" class="input-group mb-3 invalid-control-label">
          <p *ngIf="this.form.commonFactor.OBit == false || this.form.commonFactor.OBit == null" style="width: inherit" >
          {{this.form.commonFactor.error}}
          <button (click)="OverridecommonFactorClick()" class="btn btn-outline-secondary Obutton" type="button">Overide</button>
          </p>
          <input [(ngModel)]="this.form.commonFactor.OReason" [ngModelOptions]="{standalone: true}" *ngIf="this.form.commonFactor.OBit == true" [disabled]="disabledcommonFactor" type="text" class="form-control" placeholder="Override Reason" aria-label="Override Reason" aria-describedby="basic-addon2">
          <div *ngIf="this.form.commonFactor.OBit == true"  class="input-group-append ">
            <button (click)="OverridecommonFactorExcept()" [disabled]="disabledcommonFactor" class="btn btn-outline-secondary" type="button" style="font-size: 18px;">&#10004;</button>
            <button (click)="UndoOverridecommonFactor()" class="btn btn-outline-secondary" type="button" style="font-size: 22px;">&times;</button>
          </div>
        </div>
      </div>
  <div class="form-group">
    <label for="custVal">Customs Value</label>
    <input type="number" id="custVal"
      [(ngModel)]="this.form.custVal.value" [ngModelOptions]="{standalone: true}"
      class="form-control form-control-sm shadow-sm form-control-light"
      (mouseover)="updateHelpContext('form-customs-worksheet-line-custval')"
      placeholder="Customs Value"
     />
     <!-- [ngClass]="{'form-control-invalid': this.form.custValError !== null && this.form.custValError !== undefined}"-->
     <div *ngIf="this.form.custVal.error !== null" class="input-group mb-3 invalid-control-label">
      <p *ngIf="this.form.custVal.OBit == false || this.form.custVal.OBit == null" style="width: inherit" >
      {{this.form.custVal.error}}
      <button (click)="OverridecustValClick()" class="btn btn-outline-secondary Obutton" type="button">Overide</button>
      </p>
      <input [(ngModel)]="this.form.custVal.OReason" [ngModelOptions]="{standalone: true}" *ngIf="this.form.custVal.OBit == true" [disabled]="disabledcustVal" type="text" class="form-control" placeholder="Override Reason" aria-label="Override Reason" aria-describedby="basic-addon2">
      <div *ngIf="this.form.custVal.OBit == true"  class="input-group-append ">
        <button (click)="OverridecustValExcept()" [disabled]="disabledcustVal" class="btn btn-outline-secondary" type="button" style="font-size: 18px;">&#10004;</button>
        <button (click)="UndoOverridecustVal()" class="btn btn-outline-secondary" type="button" style="font-size: 22px;">&times;</button>
      </div>
    </div>
  </div>
  <div class="form-group" *ngIf="this.form.hsQuantity != undefined">
      <label for="hsQuantity">HS Quantity</label>
    <input type="text"  id="hsQuantity"
      [(ngModel)]="this.form.hsQuantity.value" [ngModelOptions]="{standalone: true}"
      class="form-control form-control-sm shadow-sm form-control-light"
      (mouseover)="updateHelpContext('form-customs-worksheet-line-hsquantity')"
      placeholder="HS Quantity"
      />
      <!-- [ngClass]="{'form-control-invalid': this.form.hsQuantityError !== null && this.form.hsQuantityError !== undefined}"-->
      <div *ngIf="this.form.hsQuantity.error !== null" class="input-group mb-3 invalid-control-label">
        <p *ngIf="this.form.hsQuantity.OBit == false || this.form.hsQuantity.OBit == null" style="width: inherit" >
        {{this.form.hsQuantity.error}}
        <button (click)="OverridehsQuantityClick()" class="btn btn-outline-secondary Obutton" type="button">Overide</button>
        </p>
        <input [(ngModel)]="this.form.hsQuantity.OReason" [ngModelOptions]="{standalone: true}" *ngIf="this.form.hsQuantity.OBit == true" [disabled]="disabledhsQuantity" type="text" class="form-control" placeholder="Override Reason" aria-label="Override Reason" aria-describedby="basic-addon2">
        <div *ngIf="this.form.hsQuantity.OBit == true"  class="input-group-append ">
          <button (click)="OverridehsQuantityExcept()" [disabled]="disabledhsQuantity" class="btn btn-outline-secondary" type="button" style="font-size: 18px;">&#10004;</button>
          <button (click)="UndoOverridehsQuantity()" class="btn btn-outline-secondary" type="button" style="font-size: 22px;">&times;</button>
        </div>
      </div>
    </div>
  <div class="form-group" *ngIf="this.form.foreignInv != undefined">
      <label for="foreignInv">Foreign Inv</label>
    <input type="text" id="foreignInv"
      [(ngModel)]="this.form.foreignInv.value" [ngModelOptions]="{standalone: true}"
      class="form-control form-control-sm shadow-sm form-control-light"
      (mouseover)="updateHelpContext('form-customs-worksheet-line-foreigninv')"
      placeholder="Foreign Invoice"
      />
      <!-- [ngClass]="{'form-control-invalid': this.form.foreignInvError !== null && this.form.foreignInvError !== undefined}"-->
      <div *ngIf="this.form.foreignInv.error !== null" class="input-group mb-3 invalid-control-label">
        <p *ngIf="this.form.foreignInv.OBit == false || this.form.foreignInv.OBit == null" style="width: inherit" >
        {{this.form.foreignInv.error}}
        <button (click)="OverrideforeignInvClick()" class="btn btn-outline-secondary Obutton" type="button">Overide</button>
        </p>
        <input [(ngModel)]="this.form.foreignInv.OReason" [ngModelOptions]="{standalone: true}" *ngIf="this.form.foreignInv.OBit == true" [disabled]="disabledforeignInv" type="text" class="form-control" placeholder="Override Reason" aria-label="Override Reason" aria-describedby="basic-addon2">
        <div *ngIf="this.form.foreignInv.OBit == true"  class="input-group-append ">
          <button (click)="OverrideforeignInvExcept()" [disabled]="disabledforeignInv" class="btn btn-outline-secondary" type="button" style="font-size: 18px;">&#10004;</button>
          <button (click)="UndoOverrideforeignInv()" class="btn btn-outline-secondary" type="button" style="font-size: 22px;">&times;</button>
        </div>
      </div>
    </div>
  <div class="form-group" *ngIf="this.form.duty != undefined">
      <label for="duty">Duty</label>
    <input type="text" id="duty"
      [(ngModel)]="this.form.duty.value" [ngModelOptions]="{standalone: true}"
      class="form-control form-control-sm shadow-sm form-control-light"
      (mouseover)="updateHelpContext('form-customs-worksheet-line-duty')"
      placeholder="Duty"
      />
      <!-- [ngClass]="{'form-control-invalid': this.form.dutyError !== null && this.form.dutyError !== undefined}"-->
      <div *ngIf="this.form.duty.error !== null" class="input-group mb-3 invalid-control-label">
        <p *ngIf="this.form.duty.OBit == false || this.form.duty.OBit == null" style="width: inherit" >
        {{this.form.duty.error}}
        <button (click)="OverridedutyClick()" class="btn btn-outline-secondary Obutton" type="button">Overide</button>
        </p>
        <input [(ngModel)]="this.form.duty.OReason" [ngModelOptions]="{standalone: true}" *ngIf="this.form.duty.OBit == true" [disabled]="disabledduty" type="text" class="form-control" placeholder="Override Reason" aria-label="Override Reason" aria-describedby="basic-addon2">
        <div *ngIf="this.form.duty.OBit == true"  class="input-group-append ">
          <button (click)="OverridedutyExcept()" [disabled]="disabledduty" class="btn btn-outline-secondary" type="button" style="font-size: 18px;">&#10004;</button>
          <button (click)="UndoOverrideduty()" class="btn btn-outline-secondary" type="button" style="font-size: 22px;">&times;</button>
        </div>
      </div>
    </div>
  <div class="form-group">
    <div class="col-sm-3 " style="float: left; padding-left:0px;">
      <label for="supplyUnit">Supply Unit</label>
      <input type="text" id="supplyUnit"
        [(ngModel)]="this.form.supplyUnit.value" [ngModelOptions]="{standalone: true}"
        class="form-control form-control-sm shadow-sm form-control-light"
        (mouseover)="updateHelpContext('form-customs-worksheet-line-supplyUnit')"
        placeholder="Supply Unit"/>
    </div>
    <div class="col-sm-9" style="float:left;">
      <label for="currencyID">Unit of Measure</label>
          <input [(ngModel)]="this.unitQuery" (keyup)="filterUnit()"
          type="text" placeholder="Unit Of Measure" aria-label="Unit of Measure"
          class="form-control form-control-sm shadow-sm form-control-light"
          (mouseover)="updateHelpContext('form-invoice-line-unitofmeasure')"
          [formControl]="unitOfMeasure" [matAutocomplete]="unitOfMeasureAuto">
          <mat-autocomplete #unitOfMeasureAuto="matAutocomplete" >
            <mat-option *ngFor="let unit of unitOfMeasureList" [value]="unit.name" (onSelectionChange)="selectedUnit(unit)">
              {{unit.name}}, {{unit.description}}
            </mat-option>
          </mat-autocomplete>
      </div>
  </div>
  <!-- <div class="form-group col-sm-6">
    <div class="form-group">
      <label for="currencyID">Unit of Measure</label>
        <input [(ngModel)]="this.unitQuery" (keyup)="filterUnit()"
        type="text" placeholder="Unit Of Measure" aria-label="Unit of Measure"
        class="form-control form-control-sm shadow-sm form-control-light"
        (mouseover)="updateHelpContext('form-invoice-line-unitofmeasure')"
        [formControl]="unitOfMeasure" [matAutocomplete]="unitOfMeasureAuto">
        <mat-autocomplete #unitOfMeasureAuto="matAutocomplete">
          <mat-option *ngFor="let unit of unitOfMeasureList" [value]="unit.name" (onSelectionChange)="selectedUnit(unit)">
            {{unit.name}}, {{unit.description}}
          </mat-option>
        </mat-autocomplete>
    </div>
  </div> -->

  <div class="form-group">
    <label for="currencyID">Currency</label>
    <input type="text"
      [(ngModel)]="this.currencyQuery"
      class="form-control form-control-sm shadow-sm form-control-light"
      (keyup)="filterCurrency()"
      placeholder="Currency" aria-label="Currency"
      [formControl]="currency"
      [matAutocomplete]="currencyAuto"
      (mouseover)="updateHelpContext('form-sad500-line-tariff-description')">
      <mat-autocomplete #currencyAuto="matAutocomplete" >
        <mat-option *ngFor="let currency of currenciesList" [value]="currency.code"
        (onSelectionChange)="selectedCurrency(currency.currencyID)">
          {{currency.code}} - {{currency.name}}
        </mat-option>
      </mat-autocomplete>
    <!-- <select
        class="form-control form-control-sm shadow-sm form-control-light"
        [formControl]="currency"
        (mouseover)="updateHelpContext('form-customs-worksheet-line-currency')">
      <option [value]=-1 selected disabled>Select A Currency</option>
      <option [value]=199>ZAR</option>
      <option [value]=200>GBP</option>
    </select> -->
  </div>
  <div class="form-group">
    <label for="tariff">Tariff</label>
      <input type="text"
      [(ngModel)]="this.tariffQuery"
      class="form-control form-control-sm shadow-sm form-control-light"
      (keyup)="filterTariff()"
      placeholder="Tariff" aria-label="Tariff"
      [formControl]="tariff"
      [matAutocomplete]="tariffAuto"
      (mouseover)="updateHelpContext('form-sad500-line-tariff-description')">

      <mat-autocomplete #tariffAuto="matAutocomplete" >
        <mat-option *ngFor="let tariff of tariffs" [value]="tariff.description"
        (onSelectionChange)="selectedTariff(tariff.id)">
          {{tariff.description}}
        </mat-option>
      </mat-autocomplete>
  </div>
  <div class="form-group">
  <label for="currencyID">Invoice No</label>
  <input type="text"
    [(ngModel)]="this.form.invoiceNo.value" type="text" [ngModelOptions]="{standalone: true}"
    class="form-control form-control-sm shadow-sm form-control-light"
    (mouseover)="updateHelpContext('form-customs-worksheet-line-duty')" placeholder="Invoice No"/>
  </div>
  <div class="form-group">
    <label for="currencyID">Prduct Code</label>
    <input type="text"
      [(ngModel)]="this.form.prodCode.value" type="text" [ngModelOptions]="{standalone: true}"
      class="form-control form-control-sm shadow-sm form-control-light"
      (mouseover)="updateHelpContext('form-customs-worksheet-line-duty')" placeholder="Product Code"/>
  </div>
  <div class="form-group">
    <label for="currencyID">Country of Origin</label>
    <input [(ngModel)]="this.countryQuery" type="text"
      class="form-control form-control-sm shadow-sm form-control-light"
      (keyup)="filterCountries()"
      placeholder="COO" aria-label="COOID"
      [formControl]="cooControl"
      [matAutocomplete]="cooAuto"
      (mouseover)="updateHelpContext('form-customs-worksheet-line-coo')">
      <mat-autocomplete #cooAuto="matAutocomplete" >
        <mat-option *ngFor="let country of countriesList" [value]="country.code"
        (onSelectionChange)="selectedCountry(country.countryID)">
          {{country.code}} - {{country.name}}
        </mat-option>
      </mat-autocomplete>
  </div>
</form>
