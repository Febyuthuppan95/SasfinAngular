<button style="float: right" mat-icon-button mat-dialog-close><mat-icon>clear</mat-icon></button>
<h3 mat-dialog-title cdkDrag cdkDragRootElement=".cdk-overlay-pane">Invoice Lines</h3>
<input type="text" class="form-control shadow-sm  mb-2 mr-sm-2 form-control-sm ml-auto"
            placeholder="Search" (keyup)="searchBar()" [(ngModel)]="filter" [ngModelOptions]="{standalone: true}" />
<div mat-dialog-content>
  <ng-container *ngIf="lines.length === 0 && currentLinks.length === 0">
    <h5>No Lines Available</h5>
  </ng-container>
  <ng-container *ngIf="currentLinks.length > 0">
    <h5>Linked Lines ({{currentLinks.length}})</h5>
  </ng-container>
  <div style="padding: 0 20px 0 0px;">
    <ng-container *ngFor="let item of currentLinks; let i = index">
      <button mat-button (click)="removeJoin(i)" style="margin: 0; padding: 0; width: 100%; margin-left: 20px;">
        <mat-card class="linked">
          <mat-card-content>
            <button tabindex="-1" mat-mini-fab color="primary" style="
            position: absolute;
            left: -20px;
            top: 30%;
            bottom: 50%;">{{i+1}}</button>
            <div class="row">
              <div class="col-6">
                <p style="width: 100%; margin-left: 24px;">
                  <strong>Invoice No</strong> {{item.invoiceNo}} <br>
                  <strong>Total Line Value</strong> {{item.totalLineValue}} <br>
                  <strong>Item</strong> {{item.items ? item.items.Name : '-'}} <br>
                </p>
              </div>
              <div class="col-6">
                <p style="width: 100%;">
                  <strong>Unit Price</strong> {{item.unitPrice}} <br>
                  <strong>Quantity</strong> {{item.quantity == -1 ? '0' : item.quantity}} <br>
                </p>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </button>
      <br>
      <br>
    </ng-container>
    <ng-container *ngIf="lines.length > 0">
      <br>
      <h5>Available Lines ({{Templines.length}})</h5>
    </ng-container>
    <ng-container *ngFor="let key of lineKeys;">
      <small>{{key}}</small>
      <ng-container *ngFor="let item of formattedInvoiceLines[key]; let i = index">
        <button mat-button (click)="addJoin(item)" style="margin: 0; padding: 0; width: 100%; margin-left: 20px;">
          <mat-card>
            <mat-card-content>
              <button tabindex="-1" mat-mini-fab color="accent" style="
              position: absolute;
              left: -20px;
              top: 30%;
              bottom: 50%;">{{i+1}}</button>
              <div class="row">
                <div class="col-6">
                  <p style="width: 100%; margin-left: 24px;">
                    <strong>Invoice No</strong> {{item.invoiceNo}} <br>
                    <strong>Total Line Value</strong> {{item.totalLineValue}} <br>
                    <strong>Item</strong> {{item.items ? item.items.Name : '-'}} <br>
                  </p>
                </div>
                <div class="col-6">
                  <p style="width: 100%;">
                    <strong>Unit Price</strong> {{item.unitPrice}} <br>
                    <strong>Quantity</strong> {{item.quantity}} <br>
                  </p>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        </button>
      </ng-container>
      <br>
      <br>
    </ng-container>
  </div>
  <br>
</div>
