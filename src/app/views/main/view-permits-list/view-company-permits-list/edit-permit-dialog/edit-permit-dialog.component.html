<div mat-dialog-content class="overflow: hidden">
  <div class="row" style="overflow: hidden">
    <div style=" width: 58% ;overflow-y: auto; position: relative; overflow-y: auto; height: 65vh;" ngClass="{'col-7': this.file, 'col-12': !this.filePreview}">
        <app-pdf-viewer
        class="fill-div"
        *ngIf="this.displayPDF"
        [pdf]="this.pdfSRC"
        >
        </app-pdf-viewer>
    </div>
    <div class="col-5 bg-light" style="overflow-y: auto;margin: 0; max-height:67vh; padding: 24px" *ngIf="this.permitTypeID === 1">
      <h5 class="modal-title" id="modalContent" style="color:black">Update Permit</h5>
        <form [formGroup]="form" class="bg-light" style="padding: 24px; width: 100%;">
            <div *ngIf="this.file !== undefined" class="split-pdf">
                  <!-- <mat-form-field appearance="fill">
                    <mat-label>Pages</mat-label>
                    <input matInput type="text" placeholder="Pages eg. (1-3, 5)">
                    <mat-hint>eg. (1-3, 5)</mat-hint> -->
                    <!-- <mat-error *ngIf="section.control.hasError('required')">
                      Pages is <strong>required, format: 1-3, 5</strong>
                    </mat-error> -->
                    <!-- <mat-error *ngIf="section.control.hasError('pattern')">
                      Incorrect format <strong>eg. (1-3, 5)</strong>
                    </mat-error> -->
                    <!-- <mat-error *ngIf="section.control.hasError('format')">
                      Incorrect Format <strong>make sure ranges are valid</strong>
                    </mat-error> -->
                  <!-- </mat-form-field> -->

            </div>
            <mat-form-field class="form-group" style="margin-bottom: 0;">
              <mat-label>Permit Code:</mat-label>
              <input matInput type="text" placeholder="Code"
              [formControl]="this.form.controls.PermitCode"  required/>
              <mat-error *ngIf="this.form.controls.PermitCode.hasError('required')">
                Permit Code is <strong>required</strong>
              </mat-error>
            </mat-form-field>
            <div class="col-12" style="padding-left: 0; margin-top: 0;">
              <ls-autocomplete-tariffs [tariffHeading]="1" [(control)]="this.exportTariff" [helpSlug]="'form-customs-worksheet-line-tariff-description'" appearance="standard"></ls-autocomplete-tariffs>
              <br><br>
            </div>
          <!-- <mat-form-field class="form-group">
            <mat-label>Start Date:</mat-label>
            <input hidden [matDatepicker]="startPicker" [formControl]="this.form.controls.dateStart">
            <input matInput type="text" [textMask]="mask"
            [ngModel]="this.form.controls.dateStart.value | date : this.form.controls.dateStart.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}" (change)='toDate($event.target.value, this.form.controls.dateStart)'  required/>
            <mat-error *ngIf="this.form.controls.dateStart.hasError('required')">
              Start Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>End Date:</mat-label>
            <input hidden [matDatepicker]="endPicker" [formControl]="this.form.controls.dateEnd">
            <input matInput type="text" [textMask]="mask" [ngModel]="this.form.controls.dateEnd.value | date : this.form.controls.dateEnd.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)='toDate($event.target.value, this.form.controls.dateEnd)'required/>
            <mat-error *ngIf="this.form.controls.dateEnd.hasError('required')">
              End Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
          </mat-form-field> -->
          <mat-form-field class="form-group">
            <mat-label>Permit Date:</mat-label>
            <input hidden [matDatepicker]="endPicker" [formControl]="this.form.controls.permitDate">
            <input matInput type="text" [textMask]="mask" [ngModel]="this.form.controls.permitDate.value | date : this.form.controls.permitDate.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)='toDate($event.target.value, this.form.controls.permitDate)'required/>
            <mat-error *ngIf="this.form.controls.permitDate.hasError('required')">
              Permit Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Import Start Date:</mat-label>
            <input hidden [matDatepicker]="importStartPicker" [formControl]="this.form.controls.importdateStart">
            <input matInput type="text" [textMask]="mask"
            [ngModel]="this.form.controls.importdateStart.value | date : this.form.controls.importdateStart.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)='toDate($event.target.value, this.form.controls.importdateStart)' required/>
            <mat-error *ngIf="this.form.controls.importdateStart.hasError('required')">
              Import Start Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="importStartPicker"></mat-datepicker-toggle>
            <mat-datepicker #importStartPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Import End Date:</mat-label>
            <input hidden [matDatepicker]="importEndPicker" [formControl]="this.form.controls.importdateEnd">
            <input matInput type="text" [textMask]="mask"
            [ngModel]="this.form.controls.importdateEnd.value | date : this.form.controls.importdateEnd.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)='toDate($event.target.value, this.form.controls.importdateEnd)' required/>
            <mat-error *ngIf="this.form.controls.importdateEnd.hasError('required')">
              Import End Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="importEndPicker"></mat-datepicker-toggle>
            <mat-datepicker #importEndPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Export Start Date:</mat-label>
            <input hidden [matDatepicker]="exportStartPicker" [formControl]="this.form.controls.exportdateStart">
            <input matInput type="text" [textMask]="mask"
            [ngModel]="this.form.controls.exportdateStart.value | date : this.form.controls.exportdateStart.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)='toDate($event.target.value, this.form.controls.exportdateStart)' required/>
            <mat-error *ngIf="this.form.controls.exportdateStart.hasError('required')">
              Export Start Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="exportStartPicker"></mat-datepicker-toggle>
            <mat-datepicker #exportStartPicker></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group" style="margin-bottom: 0px;">
            <mat-label>Export End Date:</mat-label>
            <input hidden [matDatepicker]="exportEndPicker" [formControl]="this.form.controls.exportdateEnd">
            <input matInput type="text" [textMask]="mask"
            [ngModel]="this.form.controls.exportdateEnd.value | date : this.form.controls.exportdateEnd.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)='toDate($event.target.value, this.form.controls.exportdateEnd)' required/>
            <mat-error *ngIf="this.form.controls.exportdateEnd.hasError('required')">
              Export End Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="exportEndPicker"></mat-datepicker-toggle>
            <mat-datepicker #exportEndPicker></mat-datepicker>
          </mat-form-field>
          <div class="col-12" style="padding-left: 0;">
            <ls-autocomplete-tariffs [tariffHeading]="2" [(control)]="this.importTariffs" [helpSlug]="'form-customs-worksheet-line-tariff-description'" appearance="standard"></ls-autocomplete-tariffs>
            <br><br>
          </div>
          <mat-card *ngFor="let item of selectedImportTariffs; let i = index" (click)="removeTariff(i)" matTooltip="Click to remove" style="margin: 10px;">
            <mat-card-content>
              <small class="text-muted"><strong>{{item.Subheading == null ? (item.subHeading == null ? item.itemNumber: item.subHeading): item.Subheading}}{{item.Subheading ? item.Subheading.length < 8 && item.Subheading != null ? '.00' : '' : ''}}
                {{item.subheading ? item.subheading.length < 8 && item.subheading != null ? '.00' : '' : ''}}</strong></small>
              <p>
                <strong>Price</strong>:&nbsp;{{item.Price == null ? item.price: item.Price}}<br/>
                <strong>Quantity</strong>:&nbsp;{{item.Quantity== null ? item.quantity: item.Quantity}}
              </p>
            </mat-card-content>
          </mat-card>
          <br>
          <ng-container *ngIf="selectedImportTariffs.length > 0">

          </ng-container>

          <!-- <mat-chip-list>
            <mat-chip *ngFor="let item of selectedImportTariffs; let i = index" (click)="removeTariff(i)"><mat-icon>clear</mat-icon>&nbsp;{{item.subHeading == null ? item.itemNumber: item.subHeading}}{{item.subHeading ? item.subHeading.length < 8 && item.subHeading != null ? '.00' : '' : ''}}</mat-chip>
          </mat-chip-list> -->
          <!-- <br>
          <ng-container *ngIf="selectedImportTariffs.length > 0">
            <mat-card>
              <mat-card-content>
                <div style="padding: 0 24px; height: 62px;" class="line-list">
                  <button tabindex="-1" mat-raised-button class="float-right bg-danger text-light" (click)="deleteTariffPrompt();" style="margin-top: 12px; margin-bottom: 12px;">Delete</button>
                  <p *ngIf="selectedImportTariffs">
                    <button tabindex="-1" (click)="prevTarrif()" *ngIf="selectedImportTariffs.length !== 0 || selectedImportTariffs.length !== 0" style="margin-top: 12px; margin-bottom: 12px;" mat-button [disabled]="selectedImportTariffs.length === 1 || activeIndex <= 0"><span class="mdi mdi-chevron-left"></span></button>
                    <button tabindex="-1" (click)="nextTarrif()" style="margin-top: 12px; margin-bottom: 12px;" mat-button *ngIf="selectedImportTariffs.length !== 0 || selectedImportTariffs.length !== 0" [disabled]="(selectedImportTariffs.length === 1 && activeIndex <= 0) || (this.activeIndex >= this.selectedImportTariffs.length - 1)"><span class="mdi mdi-chevron-right"></span></button>
                    <span class="badge badge-transparent" *ngIf="activeIndex > -1">Tariff <input tabindex="-1" type="number" [max]="selectedImportTariffs.length - 1" [min]="1" step="1" matInput class="pagination-input" [formControl]="paginationControl" /> of {{ selectedImportTariffs.length }}</span>
                    <span class="badge badge-transparent" *ngIf="activeIndex === -1" style="margin-top: 12px; margin-bottom: 12px;">New Line</span>
                  &nbsp; -->
                  <!-- &nbsp;<span>{{lineState}}</span> -->
                  <!-- </p> -->
                <!-- <div class="line-errors" *ngIf="lineErrors.length > 0">
                    <button style="margin-bottom: 12px; width:24px; height: 24px;padding: 4px !important" class="btn btn-danger btn-sm" *ngFor="let item of lineErrors" (click)="specificLine(sad500CreatedLines.indexOf(item))">{{sad500CreatedLines.indexOf(item) + 1}}</button>
                </div> -->
              <!-- </div>
              <br>
              <br> -->
            <!-- <form [formGroup]="form" >
              (ngSubmit)="submit(form)"
              <div class="row">
                <div class="col-6">
                  <mat-form-field appearance="fill">
                  <mat-label>
                    Import Tariff
                  </mat-label>
                  <input matInput type="text" disabled (focusin)="updateHelpContext('form-invoice-line-LineNo')">
                </mat-form-field>
                </div>
                <div class="col-6">
                  <ls-autocomplete-units-of-measure [(control)]="form.controls.unitOfMeasureID" [helpSlug]="'form-cws-line-uom'"></ls-autocomplete-units-of-measure>
                  <br><br>
                </div>
                <div class="col-6">
                  <mat-form-field appearance="fill" >
                    <mat-label>
                      Quantity
                    </mat-label>
                    <input matInput type="text" formControlName="hsQuantity" (focusin)="updateHelpContext('form-customs-worksheet-line-hsquantity')">
                    <mat-error *ngIf="!form.controls.hsQuantityOBit.value  && form.controls.hsQuantityError.value">{{form.controls.hsQuantityError.value}}</mat-error>
                  </mat-form-field>
                  <br><br>
                </div>
                <div class="col-6">
                  <mat-form-field appearance="fill" >
                    <mat-label>
                      Price
                    </mat-label>
                   <input matInput type="text" formControlName="unitPrice" (focusin)="updateHelpContext('form-invoice-line-unitprice')">
                   <mat-error *ngIf="form.controls.unitPrice.hasError('noMatch')">Value does not match previous value: {{tempForm.controls.unitPrice.value}}</mat-error>
                  </mat-form-field>
                  <br><br>
                </div>
              </div>
            </form>

          </mat-card-content>
        </mat-card>
          </ng-container> -->
        </form>
      </div>
      <div class="col-5 bg-light"style="overflow-y: auto;margin: 0; max-height:67vh; padding: 24px" *ngIf="this.permitTypeID === 2" >
        <h5 class="modal-title" id="modalContent" style="color:black">Capture PRCC</h5>
        <form [formGroup]="prccForm" class="bg-light" style="padding: 24px; width: 100%;">
          <mat-form-field class="form-group">
            <mat-label>PRCC Number:</mat-label>
            <input matInput type="number" placeholder="Code"
            [formControl]="this.prccForm.controls.prccNumber"  required/>
            <mat-error *ngIf="this.prccForm.controls.prccNumber.hasError('required')">
              PRCC Number is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Custom Value:</mat-label>
            <input matInput type="number" placeholder="Code"
            [formControl]="this.prccForm.controls.prccCustomValue"  required/>
            <mat-error *ngIf="this.prccForm.controls.prccCustomValue.hasError('required')">
              Custome Value is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Reg No:</mat-label>
            <input matInput type="text" placeholder="Code"
            [formControl]="this.prccForm.controls.prccRegNo"  required/>
            <mat-error *ngIf="this.prccForm.controls.prccRegNo.hasError('required')">
              Reg No is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>File No:</mat-label>
            <input matInput type="text" placeholder="Code"
            [formControl]="this.prccForm.controls.prccFileNo"  required/>
            <mat-error *ngIf="this.prccForm.controls.prccFileNo.hasError('required')">
              File No is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Start Date:</mat-label>
            <input hidden [matDatepicker]="prccStartDate" [formControl]="this.prccForm.controls.prccStartDate">
            <input matInput type="text" [textMask]="mask" [ngModel]="this.prccForm.controls.prccStartDate.value | date : this.prccForm.controls.prccStartDate.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)="toDate($event.target.value, this.prccForm.controls.prccStartDate)" required/>
            <mat-error *ngIf="this.prccForm.controls.prccStartDate.hasError('required')">
              Start Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="prccStartDate"></mat-datepicker-toggle>
            <mat-datepicker #prccStartDate></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>End Date:</mat-label>
            <input hidden [matDatepicker]="prccEndDate" [formControl]="this.prccForm.controls.prccEndDate">
            <input matInput type="text" [textMask]="mask" [ngModel]="this.prccForm.controls.prccEndDate.value | date : this.prccForm.controls.prccEndDate.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)="toDate($event.target.value, this.prccForm.controls.prccEndDate)" required/>
            <mat-error *ngIf="this.prccForm.controls.prccEndDate.hasError('required')">
              End Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="prccEndDate"></mat-datepicker-toggle>
            <mat-datepicker #prccEndDate></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Import Start Date:</mat-label>
            <input hidden [matDatepicker]="prccImportStartDate" [formControl]="this.prccForm.controls.prccImportStartDate">
            <input matInput type="text" [textMask]="mask" [ngModel]="this.prccForm.controls.prccImportStartDate.value | date : this.prccForm.controls.prccImportStartDate.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)="toDate($event.target.value, this.prccForm.controls.prccImportStartDate)" required/>
            <mat-error *ngIf="this.prccForm.controls.prccImportStartDate.hasError('required')">
              Import Start Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="prccImportStartDate"></mat-datepicker-toggle>
            <mat-datepicker #prccImportStartDate></mat-datepicker>
          </mat-form-field>
          <mat-form-field class="form-group">
            <mat-label>Export End Date:</mat-label>
            <input hidden [matDatepicker]="prccImportEndDate" [formControl]="this.prccForm.controls.prccImportEndDate">
            <input matInput type="text" [textMask]="mask" [ngModel]="this.prccForm.controls.prccImportEndDate.value | date : this.prccForm.controls.prccImportEndDate.value !== null?'yyyy/MM/dd' : ''"
            [ngModelOptions]="{standalone: true}"  (change)="toDate($event.target.value, this.prccForm.controls.prccImportEndDate)" required/>
            <mat-error *ngIf="this.prccForm.controls.prccImportEndDate.hasError('required')">
              Import End Date is <strong>required</strong>
            </mat-error>
            <mat-datepicker-toggle matSuffix [for]="prccImportEndDate"></mat-datepicker-toggle>
            <mat-datepicker #prccImportEndDate></mat-datepicker>
          </mat-form-field>
        </form>

      </div>
      <div class="col-5 bg-light"style="overflow-y: auto;margin: 0; max-height:67vh; padding: 24px" *ngIf="this.permitTypeID === 3" >
        <h5 class="modal-title" id="modalContent" style="color:black">Capture EPC</h5>
        <form>
          <mat-form-field class="form-group">
            <mat-label>EPC Code:</mat-label>
            <input matInput type="text" placeholder="Code"
            [formControl]="this.epcForm.controls.epcCode"  required/>
            <mat-error *ngIf="this.epcForm.controls.epcCode.hasError('required')">
              EPC Code is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <div class="col-12" style="padding-left: 0;">
            <ls-autocomplete-tariffs [tariffHeading]="2" [(control)]="this.epcForm.controls.epcTariffs" [helpSlug]="'form-customs-worksheet-line-tariff-description'" appearance="standard"></ls-autocomplete-tariffs>
            <br><br>
          </div>
          <div style="font-size: 0">
            <ng-container *ngFor="let item of selectedImportTariffs; let i = index">
            <mat-card *ngIf="item.isDeleted !== true"(click)="removeTariff(i)" matTooltip="Click to remove" style="font-size: 80%; margin: 5px">
              <mat-card-content *ngIf="item.isDeleted !== true">
                <small class="text-muted"><strong>{{item.Subheading == null ? item.itemNumber: item.Subheading}}{{item.Subheading ? item.Subheading.length < 8 && item.Subheading != null ? '.00' : '' : ''}}</strong></small>
                <p>
                  <strong>Tariff</strong>:&nbsp;{{item.SubHeading}}<br/>
                  <strong>Item</strong>:&nbsp;{{item.Name}}<br/>
                </p>
              </mat-card-content>
            </mat-card>
            <br>
          </ng-container>

          <ng-container *ngIf="selectedImportTariffs.length > 0">

          </ng-container>
          </div>


        </form>
      </div>

  </div>

  <div class="split-overlay" *ngIf="processing"> <mat-spinner></mat-spinner></div>
</div>
<div class="form-group text-right" style="margin-bottom: 5px; margin-top: 20px;" > <!--*ngIf="this.file !== undefined"-->
  <button class="btn btn-light btn-sm" (click)="dismiss()" [disabled]="processing" style="margin-right: 5px; margin-left: 5px;">Cancel</button>
  <button type="button" (click)="formSubmit()"class="btn btn-primary btn-sm" [disabled]="processing" style="margin-right: 5px; margin-left: 5px;">Submit</button>
  </div>
